<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
	<meta charset="UTF-8" />
	<title>Menu Outstandings</title>
</head>

<body>

	<header th:replace="~{layout/layout :: header}"></header>

	<div class="container py-4">
		<a th:href="@{/outstanding/create}" class="btn btn-info btn-xs">Nuevo Outstanding</a>
	</div>

	<div class="container py-4">
		<div class="card bg-dark text-white">

			<div class="card-header" style="font-size: xx-large">Filtrar Outstandings</div>

			<div class="card-body">

				<form th:action="@{/outstanding}" th:object="${filter}" method="post">

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Cantidad Restante</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{cantidadRestante}"
								pattern="^\d*(\.\d{1,2})?$" title="Solo se permiten números con hasta 2 decimales" />
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Fecha Efectiva</label>
						<div class="col-sm-10">
							<input type="date" class="form-control" th:field="*{fechaEfectiva}" />
						</div>
					</div>


					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Fecha Creacion</label>
						<div class="col-sm-10">
							<input type="date" class="form-control" th:field="*{fechaCreacion}" />
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Fecha Finalización</label>
						<div class="col-sm-10">
							<input type="date" class="form-control" th:field="*{fechaFinalizacion}" />
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Pago Principal</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{pagoPrincipal}"
								pattern="^\d*(\.\d{1,2})?$" title="Solo se permiten números con hasta 2 decimales" />
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Pago Interes</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{pagoIntereses}"
								pattern="^\d*(\.\d{1,2})?$" title="Solo se permiten números con hasta 2 decimales" />
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Tipo Interes</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{tipoInteres}">
								<option value="">---</option>
								<option value="1">Interes1</option>
							</select>
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Tipo Cobros</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{tipoCobros}">
								<option value="">---</option>
								<option value="MANUAL">Manual</option>
								<option value="AUTOMATICO">Automatico</option>
							</select>
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Periodicidad</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{periodicidad}">
								<option value="">---</option>
								<option value="SEMANAL">Semanal</option>
								<option value="MENSUAL">Mensual</option>
								<option value="TRIMESTRAL">Trimestral</option>
							</select>
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Cantidad Cobro Periodico</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{cantidadCobroPeriodico}"
								pattern="^\d*(\.\d{1,2})?$" title="Solo se permiten números con hasta 2 decimales" />
						</div>
					</div>

					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Facility</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{facility}">
								<option value="">---</option>
								<option th:each="facility: ${facilities}" th:value="${facility.idFacility}"
									th:text="${facility.idFacility}">
								</option>
							</select>
						</div>
					</div>

					<div class="form-group row">
						<div class="col-sm-6">
							<input type="submit" class="btn btn-secondary" value="Filtrar" />
						</div>
					</div>

				</form>

			</div>
		</div>
	</div>

	<div class="container-fluid py-4">
		<div class="card bg-light">

			<div class="card-header" style="font-size: xx-large">Listado de Outstandings</div>

			<table class="table table-striped table-bordered">
				<thead class="thead-inverse">
					<tr>
						<td>ID</td>
						<td>Cantidad Restante</td>
						<td>Fecha Efectiva</td>
						<td>Fecha Creacion</td>
						<td>Fecha Finalizacion</td>
						<td>Pago Principal</td>
						<td>Pago Intereses</td>
						<td>Tipo Interes</td>
						<td>Tipo Cobros</td>
						<td>Periodicidad</td>
						<td>Cantidad Cobro Periodico</td>
						<td>Facility</td>
					</tr>
				</thead>
				<tbody>
					<tr th:each="out: ${outs}">
						<td th:text="${out.idOutstanding}"></td>
						<td th:text="${out.cantidadRestante}"></td>
						<td th:text="${out.fechaEfectiva}"></td>
						<td th:text="${out.fechaCreacion}"></td>
						<td th:text="${out.fechaFinalizacion}"></td>
						<td th:text="${out.pagoPrincipal}"></td>
						<td th:text="${out.pagoIntereses}"></td>
						<td th:each="tipoInteres: ${tipoIntereses}"
							th:if="${tipoInteres.idTipoInteres == out.tipoInteres}" th:text="${tipoInteres.nombre}">
						</td>
						<td th:text="${out.tipoCobros}"></td>
						<td th:text="${out.periodicidad}"></td>
						<td th:text="${out.cantidadCobroPeriodico}"></td>
						<td th:text="${out.facility}"></td>
						<td th:if="${out.tipoCobros == 'MANUAL' && out.pagoPrincipal != 0}"><a
								th:href="@{/outstanding/pago/} + ${out.idOutstanding}"
								class="btn btn-secondary btn-xs">Realizar
								Pago</a></td>
						<td><a th:href="@{/outstanding/edit/} + ${out.idOutstanding}"
								class="btn btn-info btn-xs">Editar</a></td>
						<td><a th:href="@{/outstanding/delete/} + ${out.idOutstanding}"
								class="btn btn-danger btn-xs">Borrar</a></td>
					</tr>
				</tbody>
			</table>

		</div>
	</div>

</body>

</html>