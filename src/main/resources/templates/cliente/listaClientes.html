<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
	<title>Lista clientes</title>
</head>

<body>

	<header th:replace="~{layout/layout :: header}"></header>

	<div class="container py-4">
		<a th:href="@{/nuevoCliente}" class="btn btn-info btn-xs">Nuevo cliente</a>
	</div>

	<div class="container py-4">
		<div class="card bg-dark text-white">

			<div class="card-header" style="font-size: xx-large">Filtrar Clientes</div>

			<div class="card-body">

				<form th:action="@{/filtrar}" th:object="${filter}" method="post">
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Nombre legal:</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{nombreLegal}" />
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Dirección legal:</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{direccionLegal}" />
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Dinero:</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{dinero}" pattern="^\d*(\.\d{1,2})?$"
								title="Solo se permiten números con hasta 2 decimales" />
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Email:</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{email}" />
						</div>
					</div>

					<div class="row mb-3" th:if="${session.usuario.rol == 'ADMIN'}">
						<label class="col-sm-2 col-form-label">Banco:</label>
						<div class="col-sm-10">
							<select class="form-control" name="idBanco" id="idBanco">
								<option value="">---</option>
								<option th:each="banco: ${bancos}" th:value="${banco.idBanco}"
									th:itemid="${banco.idBanco}" th:text="${banco.nombre}"></option>
							</select>
						</div>
					</div>

					<div class="form-group row">
						<div class="col-sm-6">
							<input type="submit" class="btn btn-secondary" value="Filtrar" />
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="container py-6">
		<div class="card bg-light">
			<div class="card-header" style="font-size: xx-large">Listado de Deals</div>

			<table class="table table-striped table-bordered">
				<thead class="thead-inverse">
					<tr>
						<td>Nombre legal</td>
						<td>Dirección legal</td>
						<td>Capital</td>
						<td>Email</td>
						<td>Banco</td>
					</tr>
				</thead>
				<tbody>
					<tr th:each="cliente: ${clientes}">
						<td th:text="${cliente.nombreLegal}"></td>
						<td th:text="${cliente.direccionLegal}"></td>
						<td th:text="${cliente.dinero}"></td>
						<td th:text="${cliente.email}"></td>
						<td th:if="${cliente.idBanco == null}"></td>
						<td th:else th:each="banco : ${bancos}" th:if="${banco.idBanco == cliente.idBanco}"
							th:utext="${banco.nombre}"></td>
						<td><a th:href="@{editarCliente/} + ${cliente.idCliente}" class="btn btn-info btn-xs"
								th:text="Editar"></a></td>
						<td><a th:href="@{eliminarCliente/} + ${cliente.idCliente}" class="btn btn-danger btn-xs"
								th:text="Eliminar"></a></td>

					</tr>
				</tbody>
			</table>

		</div>
	</div>

</body>

</html>