<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
	<meta charset="UTF-8">
	<title>Lista Facility</title>
</head>

<body>

	<header th:replace="~{layout/layout :: header}"></header>

	<div class="container py-4">
		<a th:href="@{/nuevaFacility}" class="btn btn-info btn-xs">Nueva facility</a>
	</div>

	<div class="container py-4">
		<div class="card bg-dark text-white">

			<div class="card-header" style="font-size: xx-large">Filtrar</div>

			<div class="card-body">

				<form th:action="@{/filtrarFacility}" th:object="${filter}" method="post">
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Tipo:</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{tipo}">
								<option value="">---</option>
								<option value="TERM">Term</option>
								<option value="REVOLVER">Revolver</option>
							</select>
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Estado:</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{estado}">
								<option value="">---</option>
								<option value="PENDING">Pending</option>
								<option value="APPROVED">Approved</option>
								<option value="CLOSED">Closed</option>
							</select>
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Cantidad:</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" th:field="*{cantidad}" pattern="^\d*(\.\d{1,2})?$"
								title="Solo se permiten números con hasta 2 decimales" />
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Fecha de creación:</label>
						<div class="col-sm-10">
							<input type="date" class="form-control" th:field="*{fechaCreacion}" />
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Fecha efectiva:</label>
						<div class="col-sm-10">
							<input type="date" class="form-control" th:field="*{fechaEfectiva}" />
						</div>
					</div>
					<div class="row mb-3">
						<label class="col-sm-2 col-form-label">Fecha de finalización:</label>
						<div class="col-sm-10">
							<input type="date" class="form-control" th:field="*{fechaFinalizacion}" />
						</div>
					</div>
					<div class="row mb-3" th:if="${session.usuario.rol == 'ADMIN'}">
						<label class="col-sm-2 col-form-label">Deal:</label>
						<div class="col-sm-10">
							<select class="form-control" th:field="*{deal}">
								<option value="">---</option>
								<option th:each="deal: ${deals}" th:value="${deal.idDeal}" th:itemid="${deal.idDeal}"
									th:text="${deal.idDeal}"></option>
							</select>
						</div>
					</div>

					<div class="form-group row">
						<div class="col-sm-6">
							<input type="submit" class="btn btn-secondary" value="Filtrar" />
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="container py-6">
		<div class="card bg-light">

			<div class="card-header" style="font-size: xx-large">Listado de Facilities</div>


			<table class="table table-striped table-bordered" th:if="${!facilitys.isEmpty}">
				<thead class="thead-inverse">
					<tr>
						<td>ID</td>
						<td>Tipo</td>
						<td>Estado</td>
						<td>Cantidad</td>
						<td>Fecha Creación</td>
						<td>Fecha Efectiva</td>
						<td>Fecha Finalización</td>
						<td>Deal</td>
					</tr>
				</thead>
				<tbody>
					<tr th:each="facility: ${facilitys}">
						<td th:text="${facility.idFacility}"></td>
						<td th:text="${facility.tipo}"></td>
						<td th:text="${facility.estado}"></td>
						<td th:text="${facility.cantidad}"></td>
						<td th:text="${facility.fechaCreacion}"></td>
						<td th:text="${facility.fechaEfectiva}"></td>
						<td th:text="${facility.fechaFinalizacion}"></td>
						<td th:text="${facility.deal}"></td>
						<td><a th:href="@{editarFacility/} + ${facility.idFacility}" class="btn btn-info btn-xs"
								th:text="Editar"></a></td>
						<td><a th:href="@{eliminarFacility/} + ${facility.idFacility}" class="btn btn-danger btn-xs"
								th:text="Eliminar"></a></td>

					</tr>
				</tbody>
			</table>

			<p th:if="${facilitys.isEmpty}">No existen </p>

		</div>
	</div>

</body>

</html>