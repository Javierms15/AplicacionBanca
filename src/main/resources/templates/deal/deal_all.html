<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
</head>

<body>
	<a th:href="@{/deal/create}"><button>Nuevo Deal</button></a>
	<p>Filtrar:</p>
	<form th:action="@{/deal}" th:object="${filter}" method="post">
		<div>
			<label>Estado:</label>
			<select class="form-control" th:field="*{estado}">
				<option value="">---</option>
				<option value="PENDING">Pending</option>
				<option value="APPROVED">Approved</option>
				<option value="CLOSED">Closed</option>
			</select>
		</div>
		<div>
			<label>Moneda:</label>
			<select class="form-control" th:field="*{moneda}">
				<option value="">---</option>
				<option value="EUR">Euro</option>
				<option value="USD">Dolar estadounidense</option>
				<option value="JPY">Yen</option>
				<option value="GBP">Libra</option>
			</select>
		</div>
		<div>
			<label>Tipo:</label>
			<select class="form-control" th:field="*{tipo}">
				<option value="">---</option>
				<option value="SOLE_LENDER">Sole lender</option>
				<option value="SYNDICATED">Syndicated</option>
			</select>
		</div>
		<div>
			<label>Cantidad Prestamo:</label>
			<input type="text" class="form-control" th:field="*{cantidadPrestamo}" pattern="^\d*(\.\d{1,2})?$"
				title="Solo se permiten números con hasta 2 decimales" />
		</div>
		<div>
			<label>Cantidad Abonada:</label>
			<input type="text" class="form-control" th:field="*{cantidadAbonada}" pattern="^\d*(\.\d{1,2})?$"
				title="Solo se permiten números con hasta 2 decimales" />
		</div>
		<div>
			<label>Cantidad A Pagar:</label>
			<input type="text" class="form-control" th:field="*{cantidadAPagar}" pattern="^\d*(\.\d{1,2})?$"
				title="Solo se permiten números con hasta 2 decimales" />
		</div>
		<div>
			<label>Descuento:</label>
			<select class="form-control" th:field="*{descuento}">
				<option value="">---</option>
				<option value="0">No</option>
				<option value="1">SI</option>
			</select>
		</div>
		<div>
			<label>Cliente:</label>
			<select class="form-control" th:field="*{cliente}">
				<option value="">---</option>
				<option th:each="cliente: ${clientes}" th:value="${cliente.idCliente}" th:text="${cliente.nombreLegal}">
				</option>
			</select>
		</div>
		<div class="form-group row">
			<div class="col-sm-6">
				<input type="submit" class="btn btn-secondary" value="Filtrar" />
			</div>
		</div>
	</form>
	<table>
		<thead class="thead-inverse">
			<tr>
				<th>ID</th>
				<th>Estado</th>
				<th>Cantidad Prestamo</th>
				<th>Cantidad Abonada</th>
				<th>Cantidad A Pagar</th>
				<th>Moneda</th>
				<th>Tipo</th>
				<th>Descuento</th>
				<th>Cliente</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="deal: ${deals}">
				<td th:text="${deal.idDeal}"></td>
				<td th:text="${deal.estado}"></td>
				<td th:text="${deal.cantidadPrestamo}"></td>
				<td th:text="${deal.cantidadAbonada}"></td>
				<td th:text="${deal.cantidadAPagar}"></td>
				<td th:text="${deal.moneda}"></td>
				<td th:text="${deal.tipo}"></td>
				<td th:text="${deal.descuento == 0 ? 'NO' : 'SI'}"></td>
				<td th:each="cliente: ${clientes}" th:if="${deal.cliente == cliente.idCliente}"
					th:text="${cliente.nombreLegal}"></td>
				<td><a th:href="@{/deal/edit/} + ${deal.idDeal}">Editar</a></td>
				<td><a th:href="@{/deal/delete/} + ${deal.idDeal}">Borrar</a></td>
			</tr>
		</tbody>
	</table>
</body>

</html>